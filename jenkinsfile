pipeline{
    agent any
    tools {
        nodejs 'Nodejs22-6-0'
    }
    

    stages{
        stage('installing dependancies'){
            steps{
                sh 'npm install --no-audit'
            }
        }
           stage('npm dependancy check'){
            steps{
                sh 'npm audit --audit-level=critical'
            }
        }
       stage('OWASP Dependency Check') {
    steps {
        script {
            sh '''
            OWASP_dependancy-chek-10 --project "MyProject" \
            --scan ./ \
            --format ALL \
            --out ./ \
            --prettyPrint \
            --odcInstallation "OWASP-dependancy-chek-10"
            '''
        }
    }
}

        stage('Test'){
            steps{
                echo 'Testing the app'
            }
        }
        stage('Deploy'){
            steps{
                echo 'Deploying the app'
            }
        }
    }
}
